{
  "description": "The description of that function is as follows:\n\n    Compute the qr factorization of a matrix.\n\n    Factor the matrix 'a' as *qr*, where 'q' is orthonormal and 'r' is upper-triangular.\n\nFor the 'mode' parameters, the options 'reduced', 'complete, and 'raw' are new in numpy 1.8 (see the notes for more information).\nThe default is 'reduced', and to maintain backward compatibility with earlier versions of numpy, both it and the old default 'full' can be omitted.\nNote that array h returned in 'raw' mode is transposed for calling Fortran.\nThe 'economic' mode is deprecated.\nThe modes 'full' and 'economic' may be passed using only the first letter for backwards compatibility,\nbut all others must be spelled out (see the Notes for further explanation).",
  "parameters": [
    {
      "name": "select_return",
      "type": "'q', 'r', '(h, tau)'",
      "description": "Select the desired opject to return.\nSee the respective function docs for descriptors."
    },
    {
      "name": "a",
      "type": "array_like, shape (..., M, N)",
      "description": "An array-like object with the dimensionality of at least 2."
    },
    {
      "name": "mode",
      "type": "{'reduced', 'complete', 'r', 'raw'}",
      "description": "If K = min(M, N), then:\n    'reduced' : returns q, r with dimensions (..., M, K), (..., K, N) (default)\n    'complete' : returns q, r with dimensions (..., M, M), (..., M, N)\n    'r' : returns r only with dimensions (..., K, N)\n    'raw' : returns h, tau with dimensions (..., N, M), (..., K,)"
    }
  ],
  "returns": [
    {
      "name": null,
      "type": "DataContainer",
      "description": "type 'ordered pair', 'scalar', or 'matrix'"
    }
  ],
  "code": "from flojoy import flojoy, Matrix, Scalar\nimport numpy as np\nfrom collections import namedtuple\nfrom typing import Literal\n\nimport numpy.linalg\n\n\n@flojoy\ndef QR(\n    default: Matrix,\n    mode: str = \"reduced\",\n    select_return: Literal[\"q\", \"r\", \"(h, tau)\"] = \"q\",\n) -> Matrix | Scalar:\n    \"\"\"The QR node is based on a numpy or scipy function.\n\n    The description of that function is as follows:\n\n        Compute the qr factorization of a matrix.\n\n        Factor the matrix 'a' as *qr*, where 'q' is orthonormal and 'r' is upper-triangular.\n\n    For the 'mode' parameters, the options 'reduced', 'complete, and 'raw' are new in numpy 1.8 (see the notes for more information).\n    The default is 'reduced', and to maintain backward compatibility with earlier versions of numpy, both it and the old default 'full' can be omitted.\n    Note that array h returned in 'raw' mode is transposed for calling Fortran.\n    The 'economic' mode is deprecated.\n    The modes 'full' and 'economic' may be passed using only the first letter for backwards compatibility,\n    but all others must be spelled out (see the Notes for further explanation).\n\n    Parameters\n    ----------\n    select_return : 'q', 'r', '(h, tau)'\n        Select the desired opject to return.\n        See the respective function docs for descriptors.\n    a : array_like, shape (..., M, N)\n        An array-like object with the dimensionality of at least 2.\n    mode : {'reduced', 'complete', 'r', 'raw'}, optional\n        If K = min(M, N), then:\n            'reduced' : returns q, r with dimensions (..., M, K), (..., K, N) (default)\n            'complete' : returns q, r with dimensions (..., M, M), (..., M, N)\n            'r' : returns r only with dimensions (..., K, N)\n            'raw' : returns h, tau with dimensions (..., N, M), (..., K,)\n\n    Returns\n    -------\n    DataContainer\n        type 'ordered pair', 'scalar', or 'matrix'\n    \"\"\"\n\n    result = numpy.linalg.qr(\n        a=default.m,\n        mode=mode,\n    )\n\n    return_list = [\"q\", \"r\", \"(h, tau)\"]\n    if isinstance(result, tuple):\n        res_dict = {}\n        num = min(len(result), len(return_list))\n        for i in range(num):\n            res_dict[return_list[i]] = result[i]\n        result = res_dict[select_return]\n    else:\n        result = result._asdict()\n        result = result[select_return]\n\n    if isinstance(result, np.ndarray):\n        result = Matrix(m=result)\n    else:\n        assert isinstance(\n            result, np.number | float | int\n        ), f\"Expected np.number, float or int for result, got {type(result)}\"\n        result = Scalar(c=float(result))\n\n    return result\n"
}