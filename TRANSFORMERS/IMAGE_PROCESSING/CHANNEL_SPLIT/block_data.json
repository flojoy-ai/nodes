{
  "description": "While the notion of \"splitting an image into RGBA channels\" is inherently tied to coloured pictures, this function will attempt to make sense of multiple input types.\n\nShould the input be of type 'Image', then the function will return the RGBA channels.\n\nShould the input be of type 'Matrix', meaning ideally a 3D 'numpy' array of size (L, M, 3) or (L, M, 4), then the function will return each channel respectively.",
  "parameters": [],
  "returns": [
    {
      "name": null,
      "type": "IMAGE_CHANNEL_OUTPUTS",
      "description": "The images, each channel itself is rendered with alpha=1,\nexcept the alpha channel itself."
    }
  ],
  "code": "from flojoy import flojoy, Image, Matrix, DCNpArrayType\nfrom typing import TypedDict\nimport numpy as np\n\n\nclass IMAGE_CHANNEL_OUTPUTS(TypedDict):\n    r: Image\n    g: Image\n    b: Image\n    a: Image\n\n\n@flojoy\ndef CHANNEL_SPLIT(default: Image | Matrix) -> IMAGE_CHANNEL_OUTPUTS:\n    \"\"\"The CHANNEL_SPLIT node returns the rgba channels of an image into 4 separate images for direct visualization.\n\n    While the notion of \"splitting an image into RGBA channels\" is inherently tied to coloured pictures, this function will attempt to make sense of multiple input types.\n\n    Should the input be of type 'Image', then the function will return the RGBA channels.\n\n    Should the input be of type 'Matrix', meaning ideally a 3D 'numpy' array of size (L, M, 3) or (L, M, 4), then the function will return each channel respectively.\n\n    Returns\n    -------\n    IMAGE_CHANNEL_OUTPUTS\n        The images, each channel itself is rendered with alpha=1,\n        except the alpha channel itself.\n    \"\"\"\n\n    try:\n        if isinstance(default, Image):\n            r = default.r\n            g = default.g\n            b = default.b\n            a = default.a\n\n        elif isinstance(default, Matrix):\n            r = default.m[..., 0]\n            g = default.m[..., 1]\n            b = default.m[..., 2]\n            a = np.zeros_like(r) if default.m.shape[-1] == 3 else default.m[..., 3]\n\n            if default.m.shape[-1] != 3 or default.m.shape[-1] != 4:\n                raise IndexError(\n                    \"Input array is not of sensible size to split channels\"\n                )\n        else:\n            raise TypeError(\"Unexpected type of the input argument.\")\n\n        zeros = np.zeros(r.shape, np.uint8)\n        ones = 255 * np.ones(r.shape, np.uint8)\n\n        return IMAGE_CHANNEL_OUTPUTS(\n            r=Image(\n                r=r,\n                g=zeros,\n                b=zeros,\n                a=ones,\n            ),\n            g=Image(\n                r=zeros,\n                g=g,\n                b=zeros,\n                a=ones,\n            ),\n            b=Image(\n                r=zeros,\n                g=zeros,\n                b=b,\n                a=ones,\n            ),\n            a=Image(\n                r=zeros,\n                g=zeros,\n                b=zeros,\n                a=a,\n            ),\n        )\n    except Exception as e:\n        raise e\n"
}