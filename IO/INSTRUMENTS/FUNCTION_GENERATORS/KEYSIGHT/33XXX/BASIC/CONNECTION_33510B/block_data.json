{
  "description": "The connection is made with the VISA address in the Flojoy UI.\n\nThis node should also work with compatible Keysight 33XXX wavefunction\ngenerators (although they are untested).",
  "parameters": [
    {
      "name": "device",
      "type": "VisaDevice",
      "description": "The VISA address to connect to."
    }
  ],
  "returns": [
    {
      "name": null,
      "type": "DataContainer",
      "description": "Optional: None"
    }
  ],
  "code": "from flojoy import VisaDevice, flojoy, DataContainer\nfrom flojoy.connection_manager import DeviceConnectionManager\nfrom typing import Optional\nfrom qcodes.instrument_drivers.Keysight import Keysight33512B\nfrom usb.core import USBError\n\n\n@flojoy()\ndef CONNECTION_33510B(\n    device: VisaDevice,\n    default: Optional[DataContainer] = None,\n) -> Optional[DataContainer]:\n    \"\"\"The CONNECTION_33510B node connects Flojoy to a 33510B function generator.\n\n    The connection is made with the VISA address in the Flojoy UI.\n\n    This node should also work with compatible Keysight 33XXX wavefunction\n    generators (although they are untested).\n\n    Parameters\n    ----------\n    device: VisaDevice\n        The VISA address to connect to.\n\n    Returns\n    -------\n    DataContainer\n        Optional: None\n    \"\"\"\n\n    try:\n        ks = Keysight33512B(\n            \"ks\",\n            device.get_id(),\n            visalib=\"@py\",\n            device_clear=False,\n        )\n    except USBError as err:\n        raise Exception(\n            \"USB port error. Trying unplugging+replugging the port.\"\n        ) from err\n\n    DeviceConnectionManager.register_connection(device, ks)\n\n    return None\n"
}